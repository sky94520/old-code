二者特性不同，各有适用场合。

首先，最重要的一点，对象生存期不同。

栈上的空间，是自动回收的，虽然省事，但如果你不想让它自动回收，你就不能用栈来空间来创建对象，典型例子是你在一个函数内部创建一个对象，然后想把它的地址传给函数外层用，你就不能在栈上创建这个对象，因为当函数一结束，此对象就被销毁了，外面访问它会出错。
而堆的话由于是完全手工创建手工回收，再碰到delete之前这个对象是不会被销毁的，就可以随意传递。

其次才是楼上说的大小的问题，堆上申请空间可以很大，但是栈的空间却很有限，根据操作系统不同而不同，一般只有1~4MB的大小，如果在栈上申请过大的空间就会出错。

最后，栈上申请空间的速度比堆上快得多，所以如果是函数内部临时使用的小对象，一般用栈来分配。


1. new 不但分配对象空间, 还会在分配后调用对象的构造函数,需要手动使用delete来调用析构函数释放空间， 而 malloc 只是分配, 不构造:

 2010年 我自己搞定了，是有内存泄露的问题，不过泄露是在 tinyxml的读文件和 写文件部分，所以在使用的时候，用自己的方法读写文件，用tinyxml解析